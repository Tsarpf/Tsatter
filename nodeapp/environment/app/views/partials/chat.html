<span ng-controller="ChatController as chatCtrl" class="chat vspace col-xs-12">
    <div class="row tscontainer">
        <div class="users col-xs-1">
            <ts-user-bar></ts-user-bar>
        </div>

        <div class="messages col-xs-7"
            ng-show="!searching"
            scroll-glue="glued"
            lr-infinite-scroll="infiniteScrollDown"
            lr-infinite-scroll-up="infiniteScrollUp"
            scroll-threshold="100">

            <ts-chat-message ng-repeat="message in messages"> </ts-chat-message>
        </div>

        <div class="messages col-xs-7"
             ng-show="searching">
            Search results :D
            <img ng-src="result" ng-repeat="result in searchResults">
         </div>
                
        <div class="tsmedia col-xs-4" scroll-glue="mediaGlued">
            <ts-media-bar></ts-media-bar>
        </div>

        <input
               ng-show="!editingNick"
               type="button"
               value="{{nick}}"
               class="col-xs-1 own-nick-area btn default"
               ng-click="editNick()">

        <input
               ng-show="editingNick"
               focus-on="editNick"
               ng-blur="stopEditingNick()"
               type="text"
               class="col-xs-1 own-nick-area"
               ng-model="nick"
               ng-click="ownNickAreaClicked()"
               ng-keyup="$event.keyCode == 13 && ownNickAreaSubmit()">

        <input
                ng-show="!searching"
                ng-keyup="$event.keyCode == 13 && chatCtrl.privmsg()"
                ng-change="messageChanged()"
                ng-model="message"
                placeholder="Type '@' to search for pictures"
                type="text"
                class="new-message col-xs-7"
                focus-on="chatInput">

        <div class="input-group col-xs-7" ng-show="searching">
            <span class="input-group-addon">
                <span class="fui-search">
                </span>
            </span>
            <input
                    type="text"
                    class="new-message form-control"
                    placeholder="Esc to stop searching -- Enter to search"
                    ng-model="searchTerm"
                    ng-keydown="$event.keyCode == 27 && escPressedInSearch()"
                    ng-keyup="$event.keyCode == 13 && search()"
                    focus-on="searchInput">
        </div>

    </div>
 </span>
